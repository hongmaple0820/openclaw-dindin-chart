# 协同开发规范 (COLLABORATION.md)

> 多 AI + 人类协同开发的工作流程规范

## 👥 团队成员

| 角色 | 名字 | 职责 | 权限 |
|------|------|------|------|
| 👑 产品负责人 | 鸿枫 (maple) | 需求提供、产品设计、技术指导、最终决策、资源支持 | 最高 |
| 🎯 技术经理/产品经理 | 小琳 | 架构设计、任务分配、代码审核、规范制定、进度管控 | 管理 |
| 💻 全栈工程师 | 小猪 | 功能开发、测试、文档、向小琳学习请教 | 开发 |

## 🔄 协作核心原则

> **协同开发的本质是信息同步**

### 五个"及时"
1. **及时获取反馈** - 主动问进度、问困难、问需求变化
2. **及时同步代码** - 开发前 pull，完成后 push，避免冲突
3. **及时学习资源** - 新 Skills、新文档、新知识要主动学习
4. **及时暴露问题** - 有困难、有阻塞马上说，不要闷头死磕
5. **及时讨论变更** - 需求变了、方案变了，拉大家一起开会讨论

### 三个"不要"
1. **不要闷头开发** - 定期冒泡，让队友知道你在干嘛
2. **不要独自解决** - 卡住超过 30 分钟就求助
3. **不要假设对齐** - 不确定就问，别猜

### 协作心态
- 有不懂的 → **讨论**
- 有变更的 → **同步**
- 有困难的 → **求助**
- 有进展的 → **汇报**

## 📊 进度同步

### 定时汇报
- **每 2 小时**：在钉钉群同步当前进度
- **任务完成时**：立即通知团队
- **遇到阻塞时**：立即求助
- **拉取代码后**：快速浏览队友的改动，了解项目变化

### 汇报格式
```
📊 进度同步 - [时间]

🔧 当前任务：T00x - 任务名称
📈 完成进度：xx%
✅ 已完成：
  - xxx
  - xxx
⏳ 进行中：
  - xxx
❓ 问题/阻塞：
  - xxx（如有）
⏰ 预计完成：xx:xx
```

## 📋 任务管理

### 任务状态
- `📝 待分配` - 新需求，未分配给谁
- `🎯 待开发` - 已分配，未开始
- `🔧 开发中` - 正在开发
- `👀 待审核` - 开发完成，等待审核
- `✅ 已完成` - 审核通过

### 任务文件
`tasks/current.md` - 当前任务列表

## 🔀 Git 协作规范

### 分支策略
```
main          <- 稳定分支，只接受 PR 合并
├── feat/xxx  <- 功能分支
├── fix/xxx   <- 修复分支
└── docs/xxx  <- 文档分支
```

### 开发流程
1. **领取任务前**：先 `git pull origin main`
2. **创建分支**：`git checkout -b feat/功能名`
3. **开发完成**：提交并推送分支
4. **通知团队**：在群里说明已完成，请求合并
5. **代码审核**：其他成员或人类审核
6. **合并代码**：审核通过后合并到 main

### 避免冲突
1. **开发前同步**：每次开发前先 pull
2. **模块分离**：不同成员负责不同模块
3. **小步提交**：频繁提交，减少冲突范围
4. **及时沟通**：要修改共享文件时先通知

### Commit 规范
```
feat: 新功能
fix: 修复 bug
docs: 文档更新
refactor: 重构
style: 代码格式
test: 测试相关
chore: 其他杂项
```

## 📁 模块分工

### chat-hub (消息中转)
- 负责人：小琳
- 文件：`chat-hub/src/*`

### chat-admin-api (后台 API)
- 负责人：小琳
- 文件：`chat-admin-api/src/*`

### chat-admin-ui (后台前端)
- 负责人：待分配
- 文件：`chat-admin-ui/src/*`

### chat-web (用户前端)
- 负责人：待分配
- 文件：待创建

### 文档
- 负责人：全员
- 文件：`docs/*`

## 💬 沟通规范

### 任务领取
```
@小琳 我想领取「用户登录页面」任务
```

### 任务完成
```
@鸿枫 @小琳 任务「用户登录页面」已完成
- 分支：feat/login-page
- 改动：chat-admin-ui/src/views/Login.vue
- 测试：已通过
请审核合并
```

### 遇到问题
```
@小琳 我遇到问题：
1. 问题描述
2. 已尝试的方案
3. 需要的帮助
```

### 代码冲突
```
@小琳 @小猪 注意！我要修改 server.js 的 xxx 函数
请暂停对该文件的修改，等我完成后通知
```

## 🚨 紧急情况处理

1. **代码冲突**：立即通知，协商解决
2. **线上 Bug**：优先修复，通知全员
3. **需求变更**：人类确认后才执行

## 📅 每日同步

每天第一次 heartbeat 时：
1. 检查 `tasks/current.md`
2. 报告昨日进度
3. 领取今日任务

## 🔧 工具使用

### 任务看板
`tasks/current.md` - Markdown 格式的任务列表

### 代码审核
通过钉钉群讨论，人类最终决定

### 文档
`docs/` 目录下的 Markdown 文件

---

*最后更新：2026-02-06 by 小琳*
